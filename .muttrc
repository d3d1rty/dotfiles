source "gpg -dq $HOME/.mutt/my-secrets.gpg |"

# Receiving
set imap_user=$my_user
set imap_pass=$my_pwd
set folder=imap://$my_imap_host:$my_imap_port
set spoolfile=+INBOX
set postponed=+Drafts
set imap_check_subscribed
set header_cache="~/.cache/mutt"
set imap_keepalive=300
unset imap_passive
set mail_check=60
set mbox_type=Maildir

# Sending
set smtp_url=smtp://$my_personal_user:$my_pwd@$my_smtp_host:$my_smtp_port
set realname=$my_realname
set from=$my_user
set use_from=yes
set signature="~/.mutt/signature"

# General
set sidebar_visible=no
alternative_order text/plain text/enriched text/html
set mailcap_path="~/.mutt/mailcap"
auto_view text/html

# Crypto
set crypt_use_gpgme=yes
set crypt_autosign=yes
set crypt_opportunistic_encrypt=yes
set crypt_replysign=yes
set crypt_replysignencrypted=yes
set pgp_default_key=$my_crypto_key
set postpone_encrypt=yes
set pgp_decode_command="gpg --status-fd=2 %?p?--passphrase-fd 0? --no-verbose --quiet --batch --output - %f"
set pgp_verify_command="gpg --status-fd=2 --no-verbose --quiet --batch --output - --verify %s %f"
set pgp_decrypt_command="gpg --status-fd=2 %?p?--passphrase-fd 0? --no-verbose --quiet --batch --output - %f"
set pgp_sign_command="gpg --no-verbose --batch --quiet --output - %?p?--passphrase-fd 0? --armor --detach-sign --textmode %?a?-u %a? %f"
set pgp_clearsign_command="gpg --no-verbose --batch --quiet --output - %?p?--passphrase-fd 0? --armor --textmode --clearsign %?a?-u %a? %f"
set pgp_encrypt_only_command="pgpewrap gpg --batch --quiet --no-verbose --output - --encrypt --textmode --armor --always-trust -- -r %r -- %f"
set pgp_encrypt_sign_command="pgpewrap gpg %?p?--passphrase-fd 0? --batch --quiet --no-verbose --textmode --output - --encrypt --sign %?a?-u %a? --armor --always-trust -- -r %r -- %f"
set pgp_import_command="gpg --no-verbose --import %f"
set pgp_export_command="gpg --no-verbose --export --armor %r"
set pgp_verify_key_command="gpg --verbose --batch --fingerprint --check-sigs %r"
set pgp_list_pubring_command="gpg --no-verbose --batch --quiet --with-colons --with-fingerprint --with-fingerprint --list-keys %r"
set pgp_list_secring_command="gpg --no-verbose --batch --quiet --with-colons --with-fingerprint --with-fingerprint --list-secret-keys %r"
set pgp_good_sign="^\\[GNUPG:\\] GOODSIG"
set pgp_check_gpg_decrypt_status_fd

# Aliases
set alias_file = "~/.mutt/aliases"
set sort_alias = alias
set reverse_alias = yes
source $alias_file

# Keybindings
bind pager j next-line
bind pager k previous-line
bind attach,index,pager \CD next-page
bind attach,index,pager \CU previous-page
bind pager g top
bind pager G bottom
bind attach,index g first-entry
bind attach,index G last-entry
bind index,pager B sidebar-toggle-visible
bind index,pager \Cp sidebar-prev
bind index,pager \Cn sidebar-next
bind index,pager \Co sidebar-open
bind index,pager <F3> sidebar-page-up
bind index,pager <F4> sidebar-page-down
bind index,pager <F5> sidebar-prev-new
bind index,pager <F6> sidebar-next-new
bind index,pager B sidebar-toggle-visible

# Colors
color hdrdefault blue black
color quoted blue black
color signature blue black
color attachment red black
color prompt brightmagenta black
color message brightred black
color error brightred black
color indicator black red
color status brightgreen blue
color tree white black
color normal white black
color markers red black
color search white black
color tilde brightmagenta black
color index blue black ~F
color index red black "~N|~O"
color indicator cyan black
color sidebar_highlight black color8
color sidebar_divider color8 black
color sidebar_flagged red black
color sidebar_new green black
